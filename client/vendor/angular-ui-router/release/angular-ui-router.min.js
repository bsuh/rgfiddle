/**
 * State-based routing for AngularJS
 * @version v0.2.5
 * @link http://angular-ui.github.com/
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(a,b,c){"use strict";function d(a,b){return z(new(z(function(){},{prototype:a})),b)}function e(a){return y(arguments,function(b){b!==a&&y(b,function(b,c){a.hasOwnProperty(c)||(a[c]=b)})}),a}function f(a,b){var c=[];for(var d in a.path)if(""!==a.path[d]){if(!b.path[d])break;c.push(a.path[d])}return c}function g(a,b){if(Array.prototype.indexOf)return a.indexOf(b,Number(arguments[2])||0);var c=a.length>>>0,d=Number(arguments[2])||0;for(d=0>d?Math.ceil(d):Math.floor(d),0>d&&(d+=c);c>d;d++)if(d in a&&a[d]===b)return d;return-1}function h(a,b,c,d){var e,h=f(c,d),i={},j=[];for(var k in h)if(h[k].params&&h[k].params.length){e=h[k].params;for(var l in e)g(j,e[l])>=0||(j.push(e[l]),i[e[l]]=a[e[l]])}return z({},i,b)}function i(a,b){var d=1,f=2,g={},h=[],i=g,j=z(a.when(g),{$$promises:g,$$values:g});this.study=function(g){function k(a,c){if(o[c]!==f){if(n.push(c),o[c]===d)throw n.splice(0,n.indexOf(c)),new Error("Cyclic dependency: "+n.join(" -> "));if(o[c]=d,v(a))m.push(c,[function(){return b.get(a)}],h);else{var e=b.annotate(a);y(e,function(a){a!==c&&g.hasOwnProperty(a)&&k(g[a],a)}),m.push(c,a,e)}n.pop(),o[c]=f}}function l(a){return w(a)&&a.then&&a.$$promises}if(!w(g))throw new Error("'invocables' must be an object");var m=[],n=[],o={};return y(g,k),g=n=o=null,function(d,f,g){function h(){--s||(u||e(r,f.$$values),p.$$values=r,p.$$promises=!0,o.resolve(r))}function k(a){p.$$failure=a,o.reject(a)}function n(c,e,f){function i(a){l.reject(a),k(a)}function j(){if(!t(p.$$failure))try{l.resolve(b.invoke(e,g,r)),l.promise.then(function(a){r[c]=a,h()},i)}catch(a){i(a)}}var l=a.defer(),m=0;y(f,function(a){q.hasOwnProperty(a)&&!d.hasOwnProperty(a)&&(m++,q[a].then(function(b){r[a]=b,--m||j()},i))}),m||j(),q[c]=l.promise}if(l(d)&&g===c&&(g=f,f=d,d=null),d){if(!w(d))throw new Error("'locals' must be an object")}else d=i;if(f){if(!l(f))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else f=j;var o=a.defer(),p=o.promise,q=p.$$promises={},r=z({},d),s=1+m.length/3,u=!1;if(t(f.$$failure))return k(f.$$failure),p;f.$$values?(u=e(r,f.$$values),h()):(z(q,f.$$promises),f.then(h,k));for(var v=0,x=m.length;x>v;v+=3)d.hasOwnProperty(m[v])?h():n(m[v],m[v+1],m[v+2]);return p}},this.resolve=function(a,b,c,d){return this.study(a)(b,c,d)}}function j(a,b,c){this.fromConfig=function(a,b,c){return t(a.template)?this.fromString(a.template,b):t(a.templateUrl)?this.fromUrl(a.templateUrl,b):t(a.templateProvider)?this.fromProvider(a.templateProvider,b,c):null},this.fromString=function(a,b){return u(a)?a(b):a},this.fromUrl=function(c,d){return u(c)&&(c=c(d)),null==c?null:a.get(c,{cache:b}).then(function(a){return a.data})},this.fromProvider=function(a,b,d){return c.invoke(a,null,d||{params:b})}}function k(a){function b(b){if(!/^\w+(-+\w+)*$/.test(b))throw new Error("Invalid parameter name '"+b+"' in pattern '"+a+"'");if(f[b])throw new Error("Duplicate parameter name '"+b+"' in pattern '"+a+"'");f[b]=!0,j.push(b)}function c(a){return a.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&")}var d,e=/([:*])(\w+)|\{(\w+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f={},g="^",h=0,i=this.segments=[],j=this.params=[];this.source=a;for(var k,l,m;(d=e.exec(a))&&(k=d[2]||d[3],l=d[4]||("*"==d[1]?".*":"[^/]*"),m=a.substring(h,d.index),!(m.indexOf("?")>=0));)g+=c(m)+"("+l+")",b(k),i.push(m),h=e.lastIndex;m=a.substring(h);var n=m.indexOf("?");if(n>=0){var o=this.sourceSearch=m.substring(n);m=m.substring(0,n),this.sourcePath=a.substring(0,h+n),y(o.substring(1).split(/[&?]/),b)}else this.sourcePath=a,this.sourceSearch="";g+=c(m)+"$",i.push(m),this.regexp=new RegExp(g),this.prefix=i[0]}function l(){this.compile=function(a){return new k(a)},this.isMatcher=function(a){return w(a)&&u(a.exec)&&u(a.format)&&u(a.concat)},this.$get=function(){return this}}function m(a){function b(a){var b=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(a.source);return null!=b?b[1].replace(/\\(.)/g,"$1"):""}function c(a,b){return a.replace(/\$(\$|\d{1,2})/,function(a,c){return b["$"===c?0:Number(c)]})}function d(a,b,c){if(!c)return!1;var d=a.invoke(b,b,{$match:c});return t(d)?d:!0}var e=[],f=null;this.rule=function(a){if(!u(a))throw new Error("'rule' must be a function");return e.push(a),this},this.otherwise=function(a){if(v(a)){var b=a;a=function(){return b}}else if(!u(a))throw new Error("'rule' must be a function");return f=a,this},this.when=function(e,f){var g,h=v(f);if(v(e)&&(e=a.compile(e)),!h&&!u(f)&&!x(f))throw new Error("invalid 'handler' in when()");var i={matcher:function(b,c){return h&&(g=a.compile(c),c=["$match",function(a){return g.format(a)}]),z(function(a,e){return d(a,c,b.exec(e.path(),e.search()))},{prefix:v(b.prefix)?b.prefix:""})},regex:function(a,e){if(a.global||a.sticky)throw new Error("when() RegExp must not be global or sticky");return h&&(g=e,e=["$match",function(a){return c(g,a)}]),z(function(b,c){return d(b,e,a.exec(c.path()))},{prefix:b(a)})}},j={matcher:a.isMatcher(e),regex:e instanceof RegExp};for(var k in j)if(j[k])return this.rule(i[k](e,f));throw new Error("invalid 'what' in when()")},this.$get=["$location","$rootScope","$injector",function(a,b,c){function d(b){function d(b){var d=b(c,a);return d?(v(d)&&a.replace().url(d),!0):!1}if(!b||!b.defaultPrevented){var g,h=e.length;for(g=0;h>g;g++)if(d(e[g]))return;f&&d(f)}}return b.$on("$locationChangeSuccess",d),{sync:function(){d()}}}]}function n(a,e,f){function g(a){return 0===a.indexOf(".")||0===a.indexOf("^")}function i(a,b){var d=v(a),e=d?a:a.name,f=g(e);if(f){if(!b)throw new Error("No reference point given for path '"+e+"'");for(var h=e.split("."),i=0,j=h.length,k=b;j>i;i++)if(""!==h[i]||0!==i){if("^"!==h[i])break;if(!k.parent)throw new Error("Path '"+e+"' not valid for state '"+b.name+"'");k=k.parent}else k=b;h=h.slice(i).join("."),e=k.name+(k.name&&h?".":"")+h}var l=C[e];return!l||!d&&(d||l!==a&&l.self!==a)?c:l}function j(a,b){D[a]||(D[a]=[]),D[a].push(b)}function k(b){b=d(b,{self:b,resolve:b.resolve||{},toString:function(){return this.name}});var c=b.name;if(!v(c)||c.indexOf("@")>=0)throw new Error("State must have a valid name");if(C.hasOwnProperty(c))throw new Error("State '"+c+"'' is already defined");var e=-1!==c.indexOf(".")?c.substring(0,c.lastIndexOf(".")):v(b.parent)?b.parent:"";if(e&&!C[e])return j(e,b.self);for(var f in E)u(E[f])&&(b[f]=E[f](b,E.$delegates[f]));if(C[c]=b,!b["abstract"]&&b.url&&a.when(b.url,["$match","$stateParams",function(a,c){B.$current.navigable==b&&p(a,c)||B.transitionTo(b,a,!1)}]),D[c])for(var g=0;g<D[c].length;g++)k(D[c][g]);return b}function l(a,b){return v(a)&&!t(b)?E[a]:u(b)&&v(a)?(E[a]&&!E.$delegates[a]&&(E.$delegates[a]=E[a]),E[a]=b,this):this}function m(a,b){return w(a)?b=a:b.name=a,k(b),this}function n(a,e,g,j,k,l,m){function n(){m.url()!==G&&(m.url(G),m.replace())}function v(a,c,d,f,h){var i=d?c:q(a.params,c),l={$stateParams:i};h.resolve=k.resolve(a.resolve,l,h.resolve,a);var m=[h.resolve.then(function(a){h.globals=a})];return f&&m.push(f),y(a.views,function(c,d){var e=c.resolve&&c.resolve!==a.resolve?c.resolve:{};e.$template=[function(){return g.load(d,{view:c,locals:l,params:i,notify:!1})||""}],m.push(k.resolve(e,l,h.resolve,a).then(function(f){if(u(c.controllerProvider)||x(c.controllerProvider)){var g=b.extend({},e,l);f.$$controller=j.invoke(c.controllerProvider,null,g)}else f.$$controller=c.controller;f.$$state=a,h[d]=f}))}),e.all(m).then(function(){return h})}var w=e.reject(new Error("transition superseded")),D=e.reject(new Error("transition prevented")),E=e.reject(new Error("transition aborted")),F=e.reject(new Error("transition failed")),G=m.url();return s.locals={resolve:null,globals:{$stateParams:{}}},B={params:{},current:s.self,$current:s,transition:null},B.reload=function(){B.transitionTo(B.current,l,{reload:!0,inherit:!1,notify:!1})},B.go=function(a,b,c){return this.transitionTo(a,b,z({inherit:!0,relative:B.$current},c))},B.transitionTo=function(b,c,f){c=c||{},f=z({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},f||{});var g,k=B.$current,q=B.params,u=k.path,x=i(b,f.relative);if(!t(x)){var y={to:b,toParams:c,options:f};if(g=a.$broadcast("$stateNotFound",y,k.self,q),g.defaultPrevented)return n(),E;if(g.retry){if(f.$retry)return n(),F;var C=B.transition=e.when(g.retry);return C.then(function(){return C!==B.transition?w:(y.options.$retry=!0,B.transitionTo(y.to,y.toParams,y.options))},function(){return E}),n(),C}if(b=y.to,c=y.toParams,f=y.options,x=i(b,f.relative),!t(x)){if(f.relative)throw new Error("Could not resolve '"+b+"' from state '"+f.relative+"'");throw new Error("No such state '"+b+"'")}}if(x["abstract"])throw new Error("Cannot transition to abstract state '"+b+"'");f.inherit&&(c=h(l,c||{},B.$current,x)),b=x;var H,I,J=b.path,K=s.locals,L=[];for(H=0,I=J[H];I&&I===u[H]&&p(c,q,I.ownParams)&&!f.reload;H++,I=J[H])K=L[H]=I.locals;if(r(b,k,K,f))return b.self.reloadOnSearch!==!1&&n(),B.transition=null,e.when(B.current);if(c=o(b.params,c||{}),f.notify&&(g=a.$broadcast("$stateChangeStart",b.self,c,k.self,q),g.defaultPrevented))return n(),D;for(var M=e.when(K),N=H;N<J.length;N++,I=J[N])K=L[N]=d(K),M=v(I,c,I===b,M,K);var O=B.transition=M.then(function(){var d,e,g;if(B.transition!==O)return w;for(d=u.length-1;d>=H;d--)g=u[d],g.self.onExit&&j.invoke(g.self.onExit,g.self,g.locals.globals),g.locals=null;for(d=H;d<J.length;d++)e=J[d],e.locals=L[d],e.self.onEnter&&j.invoke(e.self.onEnter,e.self,e.locals.globals);if(B.transition!==O)return w;B.$current=b,B.current=b.self,B.params=c,A(B.params,l),B.transition=null;var h=b.navigable;return f.location&&h&&(m.url(h.url.format(h.locals.globals.$stateParams)),"replace"===f.location&&m.replace()),f.notify&&a.$broadcast("$stateChangeSuccess",b.self,c,k.self,q),G=m.url(),B.current},function(d){return B.transition!==O?w:(B.transition=null,a.$broadcast("$stateChangeError",b.self,c,k.self,q,d),n(),e.reject(d))});return O},B.is=function(a,d){var e=i(a);return t(e)?B.$current!==e?!1:t(d)?b.equals(l,d):!0:c},B.includes=function(a,d){var e=i(a);if(!t(e))return c;if(!t(B.$current.includes[e.name]))return!1;var f=!0;return b.forEach(d,function(a,b){t(l[b])&&l[b]===a||(f=!1)}),f},B.href=function(a,b,c){c=z({lossy:!0,inherit:!1,absolute:!1,relative:B.$current},c||{});var d=i(a,c.relative);if(!t(d))return null;b=h(l,b||{},B.$current,d);var e=d&&c.lossy?d.navigable:d,g=e&&e.url?e.url.format(o(d.params,b||{})):null;return!f.html5Mode()&&g&&(g="#"+f.hashPrefix()+g),c.absolute&&g&&(g=m.protocol()+"://"+m.host()+(80==m.port()||443==m.port()?"":":"+m.port())+(!f.html5Mode()&&g?"/":"")+g),g},B.get=function(a){if(!t(a)){var b=[];return y(C,function(a){b.push(a.self)}),b}var c=i(a);return c&&c.self?c.self:null},B}function o(a,b){var c={};return y(a,function(a){var d=b[a];c[a]=null!=d?String(d):null}),c}function p(a,b,c){if(!c){c=[];for(var d in a)c.push(d)}for(var e=0;e<c.length;e++){var f=c[e];if(a[f]!=b[f])return!1}return!0}function q(a,b){var c={};return y(a,function(a){c[a]=b[a]}),c}function r(a,b,c,d){return a!==b||(c!==b.locals||d.reload)&&a.self.reloadOnSearch!==!1?void 0:!0}var s,B,C={},D={},E={parent:function(a){if(t(a.parent)&&a.parent)return i(a.parent);var b=/^(.+)\.[^.]+$/.exec(a.name);return b?i(b[1]):s},data:function(a){return a.parent&&a.parent.data&&(a.data=a.self.data=z({},a.parent.data,a.data)),a.data},url:function(a){var b=a.url;if(v(b))return"^"==b.charAt(0)?e.compile(b.substring(1)):(a.parent.navigable||s).url.concat(b);if(e.isMatcher(b)||null==b)return b;throw new Error("Invalid url '"+b+"' in state '"+a+"'")},navigable:function(a){return a.url?a:a.parent?a.parent.navigable:null},params:function(a){if(!a.params)return a.url?a.url.parameters():a.parent.params;if(!x(a.params))throw new Error("Invalid params in state '"+a+"'");if(a.url)throw new Error("Both params and url specicified in state '"+a+"'");return a.params},views:function(a){var b={};return y(t(a.views)?a.views:{"":a},function(c,d){d.indexOf("@")<0&&(d+="@"+a.parent.name),b[d]=c}),b},ownParams:function(a){if(!a.parent)return a.params;var b={};y(a.params,function(a){b[a]=!0}),y(a.parent.params,function(c){if(!b[c])throw new Error("Missing required parameter '"+c+"' in state '"+a.name+"'");b[c]=!1});var c=[];return y(b,function(a,b){a&&c.push(b)}),c},path:function(a){return a.parent?a.parent.path.concat(a):[]},includes:function(a){var b=a.parent?z({},a.parent.includes):{};return b[a.name]=!0,b},$delegates:{}};s=k({name:"",url:"^",views:null,"abstract":!0}),s.navigable=null,this.decorator=l,this.state=m,this.$get=n,n.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$location","$urlRouter"]}function o(){function a(a,b){return{load:function(c,d){var e,f={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return d=z(f,d),d.view&&(e=b.fromConfig(d.view,d.params,d.locals)),e&&d.notify&&a.$broadcast("$viewContentLoading",d),e}}}this.$get=a,a.$inject=["$rootScope","$templateFactory"]}function p(a,c,d,e,f){var g;try{g=e.get("$animator")}catch(h){}var i=!1,j={restrict:"ECA",terminal:!0,priority:1e3,transclude:!0,compile:function(e,h,k){return function(e,h,l){function m(b){var g=a.$current&&a.$current.locals[p];if(g!==o){var i=u(r&&b);if(i.remove(h),n&&(n.$destroy(),n=null),!g)return o=null,w.state=null,i.restore(s,h);o=g,w.state=g.$$state;var j=c(i.populate(g.$template,h));if(n=e.$new(),g.$$controller){g.$scope=n;var k=d(g.$$controller,g);h.children().data("$ngControllerController",k)}j(n),n.$emit("$viewContentLoaded"),q&&n.$eval(q),f()}}var n,o,p=l[j.name]||l.name||"",q=l.onload||"",r=t(g)&&g(e,l),s=k(e),u=function(a){return{"true":{remove:function(a){r.leave(a.contents(),a)},restore:function(a,b){r.enter(a,b)},populate:function(a,c){var d=b.element("<div></div>").html(a).contents();return r.enter(d,c),d}},"false":{remove:function(a){a.html("")},restore:function(a,b){b.append(a)},populate:function(a,b){return b.html(a),b.contents()}}}[a.toString()]};h.append(s);var v=h.parent().inheritedData("$uiView");p.indexOf("@")<0&&(p=p+"@"+(v?v.state.name:""));var w={name:p,state:null};h.data("$uiView",w);var x=function(){if(!i){i=!0;try{m(!0)}catch(a){throw i=!1,a}i=!1}};e.$on("$stateChangeSuccess",x),e.$on("$viewContentLoading",x),m(!1)}}};return j}function q(a){var b=a.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/);if(!b||4!==b.length)throw new Error("Invalid state ref '"+a+"'");return{state:b[1],paramExpr:b[3]||null}}function r(a){return{restrict:"A",link:function(b,c,d){var e=q(d.uiSref),f=null,g=a.$current,h="FORM"===c[0].nodeName,i=h?"action":"href",j=!0,k=c.parent().inheritedData("$uiView");k&&k.state&&k.state.name&&(g=k.state);var l=function(b){if(b&&(f=b),j){var d=a.href(e.state,f,{relative:g});return d?(c[0][i]=d,void 0):(j=!1,!1)}};e.paramExpr&&(b.$watch(e.paramExpr,function(a){a!==f&&l(a)},!0),f=b.$eval(e.paramExpr)),l(),h||c.bind("click",function(c){var d=c.which||c.button;0!==d&&1!=d||c.ctrlKey||c.metaKey||c.shiftKey||(b.$evalAsync(function(){a.go(e.state,f,{relative:g})}),c.preventDefault())})}}}function s(a,b){function e(a){this.locals=a.locals.globals,this.params=this.locals.$stateParams}function f(){this.locals=null,this.params=null}function g(c,g){if(null!=g.redirectTo){var h,j=g.redirectTo;if(v(j))h=j;else{if(!u(j))throw new Error("Invalid 'redirectTo' in when()");h=function(a,b){return j(a,b.path(),b.search())}}b.when(c,h)}else a.state(d(g,{parent:null,name:"route:"+encodeURIComponent(c),url:c,onEnter:e,onExit:f}));return i.push(g),this}function h(a,b,d){function e(a){return""!==a.name?a:c}var f={routes:i,params:d,current:c};return b.$on("$stateChangeStart",function(a,c,d,f){b.$broadcast("$routeChangeStart",e(c),e(f))}),b.$on("$stateChangeSuccess",function(a,c,d,g){f.current=e(c),b.$broadcast("$routeChangeSuccess",e(c),e(g)),A(d,f.params)}),b.$on("$stateChangeError",function(a,c,d,f,g,h){b.$broadcast("$routeChangeError",e(c),e(f),h)}),f}var i=[];e.$inject=["$$state"],this.when=g,this.$get=h,h.$inject=["$state","$rootScope","$routeParams"]}var t=b.isDefined,u=b.isFunction,v=b.isString,w=b.isObject,x=b.isArray,y=b.forEach,z=b.extend,A=b.copy;b.module("ui.router.util",["ng"]),b.module("ui.router.router",["ui.router.util"]),b.module("ui.router.state",["ui.router.router","ui.router.util"]),b.module("ui.router",["ui.router.state"]),b.module("ui.router.compat",["ui.router"]),i.$inject=["$q","$injector"],b.module("ui.router.util").service("$resolve",i),j.$inject=["$http","$templateCache","$injector"],b.module("ui.router.util").service("$templateFactory",j),k.prototype.concat=function(a){return new k(this.sourcePath+a+this.sourceSearch)},k.prototype.toString=function(){return this.source},k.prototype.exec=function(a,b){var c=this.regexp.exec(a);if(!c)return null;var d,e=this.params,f=e.length,g=this.segments.length-1,h={};if(g!==c.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(d=0;g>d;d++)h[e[d]]=c[d+1];for(;f>d;d++)h[e[d]]=b[e[d]];return h},k.prototype.parameters=function(){return this.params},k.prototype.format=function(a){var b=this.segments,c=this.params;if(!a)return b.join("");var d,e,f,g=b.length-1,h=c.length,i=b[0];for(d=0;g>d;d++)f=a[c[d]],null!=f&&(i+=encodeURIComponent(f)),i+=b[d+1];for(;h>d;d++)f=a[c[d]],null!=f&&(i+=(e?"&":"?")+c[d]+"="+encodeURIComponent(f),e=!0);return i},b.module("ui.router.util").provider("$urlMatcherFactory",l),m.$inject=["$urlMatcherFactoryProvider"],b.module("ui.router.router").provider("$urlRouter",m),n.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider"],b.module("ui.router.state").value("$stateParams",{}).provider("$state",n),o.$inject=[],b.module("ui.router.state").provider("$view",o),p.$inject=["$state","$compile","$controller","$injector","$anchorScroll"],b.module("ui.router.state").directive("uiView",p),r.$inject=["$state"],b.module("ui.router.state").directive("uiSref",r),s.$inject=["$stateProvider","$urlRouterProvider"],b.module("ui.router.compat").provider("$route",s).directive("ngView",p)}(window,window.angular);